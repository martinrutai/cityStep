{"ast":null,"code":"var _jsxFileName = \"/Users/daliborseckar/cityStep/src/components/map.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\n// NOTE ON IMPORTS: The original imports (import L from 'leaflet'; and import 'leaflet/dist/leaflet.css';) \n// failed compilation because external NPM dependencies cannot be resolved in this environment. \n// We are proceeding by assuming the Leaflet library (L) and its CSS are loaded globally via CDN \n// in the host HTML file, which is necessary for the code to run correctly here.\n\n// We will use 'L' globally. If 'L' is undefined, the map will not initialize.\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MapApp = () => {\n  _s();\n  // Refs for the map container and the Leaflet map instance\n  const mapContainerRef = useRef(null);\n  const mapInstanceRef = useRef(null);\n  const [statusMessage, setStatusMessage] = useState(\"Right-click anywhere on the map to select a location.\");\n  useEffect(() => {\n    // Check if L (Leaflet global object) is available\n    if (typeof L === 'undefined') {\n      setStatusMessage(\"Error: Leaflet library (L) is not loaded globally. Please ensure the Leaflet CDN script is included.\");\n      return;\n    }\n\n    // Apply the necessary fix for Leaflet marker icons when loaded via CDN\n    if (L.Icon.Default.prototype._getIconUrl) {\n      delete L.Icon.Default.prototype._getIconUrl;\n    }\n    L.Icon.Default.mergeOptions({\n      iconRetinaUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png',\n      iconUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png',\n      shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png'\n    });\n\n    // Only initialize the map once\n    if (mapContainerRef.current && !mapInstanceRef.current) {\n      // Initialize map centered on London\n      const map = L.map(mapContainerRef.current).setView([51.505, -0.09], 13);\n      mapInstanceRef.current = map;\n\n      // Add the OpenStreetMap tile layer\n      L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        maxZoom: 19,\n        attribution: '© OpenStreetMap contributors'\n      }).addTo(map);\n\n      // --- Context Menu (Right-Click) Handler ---\n      map.on('contextmenu', function (e) {\n        L.DomEvent.preventDefault(e);\n        const latlng = e.latlng;\n\n        // 1. Define the HTML for the popup, including a button\n        const buttonHtml = `\n                    <div class=\"text-center p-1\">\n                        <p class=\"mb-2 text-sm text-gray-700\">Set marker at this spot?</p>\n                        <button id=\"setLocationBtn\" \n                            class=\"set-location-btn\" \n                            style=\"\n                                background-color: #4f46e5; \n                                color: white; \n                                padding: 8px 16px; \n                                border: none; \n                                border-radius: 6px; \n                                cursor: pointer; \n                                font-weight: 600;\n                                transition: background-color 0.2s;\n                            \"\n                        >\n                            Set Location\n                        </button>\n                    </div>\n                `;\n\n        // 2. Create and open the popup at the clicked coordinates\n        const popup = L.popup({\n          closeButton: true,\n          closeOnClick: true,\n          autoClose: true\n        }).setLatLng(latlng).setContent(buttonHtml).openOn(map);\n\n        // 3. Attach the click handler to the button ONLY after the popup is opened (i.e., in the DOM)\n        map.once('popupopen', event => {\n          if (event.popup === popup) {\n            const button = document.getElementById('setLocationBtn');\n            if (button) {\n              // Assign the function to run when the button is clicked\n              button.onclick = () => {\n                // Place the marker\n                L.marker(latlng).addTo(map).bindPopup(`Marker set at: ${latlng.lat.toFixed(4)}, ${latlng.lng.toFixed(4)}`).openPopup();\n\n                // Close the selection popup\n                map.closePopup(popup);\n\n                // Update React state\n                setStatusMessage(`Location set! Coordinates: ${latlng.lat.toFixed(6)}, ${latlng.lng.toFixed(6)}`);\n              };\n            }\n          }\n        });\n      });\n\n      // Cleanup function to remove the map when the component unmounts\n      return () => {\n        if (mapInstanceRef.current) {\n          mapInstanceRef.current.remove();\n          mapInstanceRef.current = null;\n        }\n      };\n    }\n  }, []); // Empty dependency array ensures this runs only on mount\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50 p-6 flex flex-col items-center font-['Inter']\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"mb-6 w-full max-w-4xl text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl font-bold text-gray-800 mb-2\",\n        children: \"Interactive Leaflet Map\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-lg text-indigo-600 font-medium\",\n        children: statusMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mapContainerRef,\n      id: \"map\",\n      className: \"w-full max-w-4xl\",\n      style: {\n        height: '70vh',\n        borderRadius: '12px',\n        boxShadow: '0 10px 25px rgba(0,0,0,0.1)'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 9\n  }, this);\n};\n_s(MapApp, \"4KISji+kV+Iy4wS/sDAnpqfmba4=\");\n_c = MapApp;\nexport default MapApp;\nvar _c;\n$RefreshReg$(_c, \"MapApp\");","map":{"version":3,"names":["React","useEffect","useRef","useState","jsxDEV","_jsxDEV","MapApp","_s","mapContainerRef","mapInstanceRef","statusMessage","setStatusMessage","L","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","current","map","setView","tileLayer","maxZoom","attribution","addTo","on","e","DomEvent","preventDefault","latlng","buttonHtml","popup","closeButton","closeOnClick","autoClose","setLatLng","setContent","openOn","once","event","button","document","getElementById","onclick","marker","bindPopup","lat","toFixed","lng","openPopup","closePopup","remove","className","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","id","style","height","borderRadius","boxShadow","_c","$RefreshReg$"],"sources":["/Users/daliborseckar/cityStep/src/components/map.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\n// NOTE ON IMPORTS: The original imports (import L from 'leaflet'; and import 'leaflet/dist/leaflet.css';) \n// failed compilation because external NPM dependencies cannot be resolved in this environment. \n// We are proceeding by assuming the Leaflet library (L) and its CSS are loaded globally via CDN \n// in the host HTML file, which is necessary for the code to run correctly here.\n\n// We will use 'L' globally. If 'L' is undefined, the map will not initialize.\n\nconst MapApp = () => {\n    // Refs for the map container and the Leaflet map instance\n    const mapContainerRef = useRef(null);\n    const mapInstanceRef = useRef(null);\n    const [statusMessage, setStatusMessage] = useState(\"Right-click anywhere on the map to select a location.\");\n\n    useEffect(() => {\n        // Check if L (Leaflet global object) is available\n        if (typeof L === 'undefined') {\n            setStatusMessage(\"Error: Leaflet library (L) is not loaded globally. Please ensure the Leaflet CDN script is included.\");\n            return;\n        }\n\n        // Apply the necessary fix for Leaflet marker icons when loaded via CDN\n        if (L.Icon.Default.prototype._getIconUrl) {\n            delete L.Icon.Default.prototype._getIconUrl;\n        }\n        L.Icon.Default.mergeOptions({\n            iconRetinaUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png',\n            iconUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png',\n            shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',\n        });\n\n\n        // Only initialize the map once\n        if (mapContainerRef.current && !mapInstanceRef.current) {\n\n            // Initialize map centered on London\n            const map = L.map(mapContainerRef.current).setView([51.505, -0.09], 13);\n            mapInstanceRef.current = map;\n\n            // Add the OpenStreetMap tile layer\n            L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\n                maxZoom: 19,\n                attribution: '© OpenStreetMap contributors'\n            }).addTo(map);\n\n            // --- Context Menu (Right-Click) Handler ---\n            map.on('contextmenu', function(e){\n                L.DomEvent.preventDefault(e); \n                const latlng = e.latlng;\n                \n                // 1. Define the HTML for the popup, including a button\n                const buttonHtml = `\n                    <div class=\"text-center p-1\">\n                        <p class=\"mb-2 text-sm text-gray-700\">Set marker at this spot?</p>\n                        <button id=\"setLocationBtn\" \n                            class=\"set-location-btn\" \n                            style=\"\n                                background-color: #4f46e5; \n                                color: white; \n                                padding: 8px 16px; \n                                border: none; \n                                border-radius: 6px; \n                                cursor: pointer; \n                                font-weight: 600;\n                                transition: background-color 0.2s;\n                            \"\n                        >\n                            Set Location\n                        </button>\n                    </div>\n                `;\n\n                // 2. Create and open the popup at the clicked coordinates\n                const popup = L.popup({ closeButton: true, closeOnClick: true, autoClose: true })\n                    .setLatLng(latlng)\n                    .setContent(buttonHtml)\n                    .openOn(map);\n\n                // 3. Attach the click handler to the button ONLY after the popup is opened (i.e., in the DOM)\n                map.once('popupopen', (event) => {\n                    if (event.popup === popup) {\n                        const button = document.getElementById('setLocationBtn');\n                        if (button) {\n                            // Assign the function to run when the button is clicked\n                            button.onclick = () => {\n                                // Place the marker\n                                L.marker(latlng).addTo(map)\n                                    .bindPopup(`Marker set at: ${latlng.lat.toFixed(4)}, ${latlng.lng.toFixed(4)}`)\n                                    .openPopup(); \n                                    \n                                // Close the selection popup\n                                map.closePopup(popup);\n\n                                // Update React state\n                                setStatusMessage(`Location set! Coordinates: ${latlng.lat.toFixed(6)}, ${latlng.lng.toFixed(6)}`);\n                            };\n                        }\n                    }\n                });\n            });\n\n            // Cleanup function to remove the map when the component unmounts\n            return () => {\n                if (mapInstanceRef.current) {\n                    mapInstanceRef.current.remove();\n                    mapInstanceRef.current = null;\n                }\n            };\n        }\n    }, []); // Empty dependency array ensures this runs only on mount\n\n    return (\n        <div className=\"min-h-screen bg-gray-50 p-6 flex flex-col items-center font-['Inter']\">\n            <header className=\"mb-6 w-full max-w-4xl text-center\">\n                <h1 className=\"text-3xl font-bold text-gray-800 mb-2\">Interactive Leaflet Map</h1>\n                <p className=\"text-lg text-indigo-600 font-medium\">{statusMessage}</p>\n            </header>\n            \n            <div \n                ref={mapContainerRef} \n                id=\"map\" \n                className=\"w-full max-w-4xl\"\n                style={{ height: '70vh', borderRadius: '12px', boxShadow: '0 10px 25px rgba(0,0,0,0.1)' }}\n            />\n        </div>\n    );\n}\n\nexport default MapApp;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}